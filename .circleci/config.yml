# docker build -t udagram-api-feed ./udagram-api-feed
# docker tag udagram-api-feed josephdaoud/udagram-api-feed:v1
# echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME"
# docker push josephdaoud/udagram-api-feed:v1


# docker build -t udagram-api-user ./udagram-api-user
# docker tag udagram-api-feed josephdaoud/udagram-api-feed:v1
# echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME"
# docker push josephdaoud/udagram-api-user:v1


# docker build -t udagram-frontend ./udagram-frontend
# docker tag udagram-frontend josephdaoud/udagram-frontend:v1
# echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME"
# docker push josephdaoud/udagram-frontend:v1


# docker build -t udagram-reverseproxy ./udagram-reverseproxy
# docker tag udagram-reverseproxy josephdaoud/udagram-reverseproxy:v1
# echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME"
# docker push josephdaoud/udagram-reverseproxy:v1


version: 2.1

jobs:
 build:
   
   steps:
     
     - run: |
         echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME"
     # build the application image
     - run: docker build -t udagram-reverseproxy ./udagram-reverseproxy
     - run: docker tag udagram-reverseproxy josephdaoud/udagram-reverseproxy:v1
     # deploy the image
     - run: docker push josephdaoud/udagram-reverseproxy:v1

     
